/* 首页头图轮播样式 */
#page-header.full_page {
  position: relative;
  overflow: hidden;
}

/* 轮播容器 */
.header-slideshow {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  z-index: 0;
}

/* 切换按钮容器 */
.slideshow-nav {
  position: absolute;
  top: 0;
  width: 60px;
  height: 100%;
  background: transparent;
  opacity: 0;
  transition: opacity 0.3s ease;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  z-index: 100 !important;
  pointer-events: auto !important;
}

.slideshow-nav:hover {
  opacity: 1;
}

.slideshow-nav.prev {
  left: 0;
}

.slideshow-nav.next {
  right: 0;
}

/* 切换按钮图标 - 使用与下拉箭头相同的颜色 */
.slideshow-nav i {
  font-size: 30px;
  color: var(--light-grey);
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15);
}

/* 轮播图片 */
.header-slideshow .slide {
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background-size: cover;
  background-position: center;
  background-repeat: no-repeat;
  opacity: 0;
  transition: opacity 1s ease-in-out;
  z-index: 1;
  pointer-events: auto !important;
}

/* 有链接的slide显示手型光标 */
.header-slideshow .slide[data-link]:not([data-link=""]) {
  cursor: pointer !important;
}

/* 当前显示的图片 - 提升z-index确保在最上层 */
.header-slideshow .slide.active {
  opacity: 1 !important;
  z-index: 2 !important;
}

/* 确保页面元素层级正确 - 垂直居中 */
#page-header.full_page #site-info {
  position: absolute !important;
  top: 50% !important;
  transform: translateY(-50%) !important;
  z-index: 10 !important;
  pointer-events: none !important;
}

/* 只恢复链接和按钮的点击，文本元素保持穿透 */
#page-header.full_page #site-info a,
#page-header.full_page #site-info button {
  pointer-events: auto !important;
}

/* 下拉箭头位置和样式 */
#scroll-down,
#page-header #scroll-down {
  position: absolute !important;
  bottom: 30px !important;
  left: 50% !important;
  transform: translateX(-50%) !important;
  z-index: 999 !important;
  font-size: 24px !important;
  cursor: pointer !important;
}

/* 下拉箭头颜色和动画 */
#scroll-down i,
#page-header #scroll-down i {
  color: var(--light-grey) !important;
  text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.15) !important;
  animation: scroll-down-animation 2s infinite !important;
}

@keyframes scroll-down-animation {
  0%,
  20%,
  50%,
  80%,
  100% {
    transform: translateY(0);
  }
  40% {
    transform: translateY(10px);
  }
  60% {
    transform: translateY(5px);
  }
}

/* 移动端适配 */
@media screen and (max-width: 768px) {
  /* 移动端隐藏切换箭头 */
  .slideshow-nav {
    display: none !important;
  }

  .header-slideshow .slide {
    background-attachment: scroll !important; /* 移动端强制使用scroll，避免性能问题 */
    background-size: cover;
    background-position: center center;
  }

  /* 移动端轮播容器优化 */
  .header-slideshow.mobile-slideshow {
    will-change: transform; /* 启用硬件加速 */
    transform: translateZ(0); /* 强制GPU加速 */
  }

  /* 移动端图片优化 */
  .header-slideshow.mobile-slideshow .slide {
    will-change: opacity;
    transform: translateZ(0);
    backface-visibility: hidden; /* 避免闪烁 */
  }

  /* 触摸设备优化 */
  .header-slideshow.touch-device {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    user-select: none;
  }
}

/* 超小屏幕优化 */
@media screen and (max-width: 480px) {
  .header-slideshow .slide {
    background-size: cover;
    background-position: center top; /* 小屏幕优先显示图片上部 */
  }

  /* 确保下拉箭头在小屏幕上可见 */
  #scroll-down,
  #page-header #scroll-down {
    bottom: 20px !important;
    font-size: 20px !important;
  }
}

/* 横屏模式优化 */
@media screen and (max-height: 500px) and (orientation: landscape) {
  .header-slideshow .slide {
    background-position: center center;
  }

  #scroll-down,
  #page-header #scroll-down {
    bottom: 15px !important;
    font-size: 18px !important;
  }
}

/* 高分辨率屏幕优化 */
@media screen and (-webkit-min-device-pixel-ratio: 2),
  screen and (min-resolution: 192dpi) {
  .header-slideshow .slide {
    background-size: cover;
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* 低性能设备优化 */
.header-slideshow.low-performance .slide {
  transition: opacity 0.5s ease-in-out; /* 缩短动画时间 */
}

/* 如果用户偏好减少动画 */
@media (prefers-reduced-motion: reduce) {
  .header-slideshow .slide {
    transition: opacity 0.2s ease-in-out;
  }

  #scroll-down i {
    animation: none !important;
  }
}

/* iOS Safari 优化 */
@supports (-webkit-touch-callout: none) {
  .header-slideshow .slide {
    -webkit-transform: translateZ(0);
    transform: translateZ(0);
    -webkit-backface-visibility: hidden;
    backface-visibility: hidden;
    -webkit-perspective: 1000;
    perspective: 1000;
  }
}
