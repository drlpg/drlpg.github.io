/* 文章封面增强样式 */

/* CSS备用隐藏机制已移除，完全依赖JavaScript处理 */

/* 确保首页和其他页面的缩略图正常显示 */
.recent-post-item .post_cover img,
.card-widget .item-headline img,
.flink .flink-item-icon img,
.index .recent-post-item img,
.category .recent-post-item img,
.tag .recent-post-item img {
  display: block !important;
  visibility: visible !important;
}

/* 文章页标题背景增强 */
#page-header.post-bg {
  position: relative;
  transition: background 0.8s ease;
  background-attachment: scroll;
  overflow: hidden;
}

/* 柔和光效果 - 直接在父元素背景上 */
#page-header.post-bg.has-glow-effect {
  background-image: radial-gradient(
    circle 500px at 80% 85%,
    rgba(255, 255, 255, 0.2) 0%,
    rgba(255, 255, 255, 0.17) 10%,
    rgba(255, 255, 255, 0.15) 20%,
    rgba(255, 255, 255, 0.12) 30%,
    rgba(255, 255, 255, 0.1) 40%,
    rgba(255, 255, 255, 0.08) 50%,
    rgba(255, 255, 255, 0.06) 60%,
    rgba(255, 255, 255, 0.04) 70%,
    rgba(255, 255, 255, 0.03) 80%,
    rgba(255, 255, 255, 0.01) 90%,
    transparent 100%
  );
}

/* 动画效果 */
@keyframes glow-pulse-main {
  0% {
    opacity: 0.7;
    transform: scale(1) rotate(0deg);
  }
  50% {
    opacity: 0.9;
    transform: scale(1.05) rotate(1deg);
  }
  100% {
    opacity: 1;
    transform: scale(1.1) rotate(2deg);
  }
}

@keyframes glow-pulse-secondary {
  0% {
    opacity: 0.5;
    transform: scale(1) rotate(0deg);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.08) rotate(-1deg);
  }
  100% {
    opacity: 0.9;
    transform: scale(1.15) rotate(-2deg);
  }
}

/* 确保文章信息和波浪动画在光晕之上 */
#page-header.post-bg #post-info {
  position: relative;
  z-index: 10;
}

#page-header.post-bg .main-hero-waves-area {
  position: relative;
  z-index: 5;
}

/* 确保导航栏在最上层 */
#page-header #nav {
  position: relative;
  z-index: 100;
}

/* 确保波浪动画在正确位置 - 覆盖任何可能的冲突 */
#page-header.post-bg .main-hero-waves-area {
  position: absolute !important;
  bottom: 0 !important;
  left: 0 !important;
  width: 100% !important;
  z-index: 5 !important;
  pointer-events: none !important;
}

/* 确保光晕效果不会影响波浪动画 */
#page-header.post-bg.has-glow-effect::after,
#page-header.post-bg.has-glow-effect::before {
  z-index: 1 !important;
}

/* 响应式设计 */
@media (max-width: 768px) {
  #page-header.post-bg.has-glow-effect::after {
    width: 300px;
    height: 300px;
    bottom: -100px;
    right: -100px;
  }
}

@media (max-width: 480px) {
  #page-header.post-bg.has-glow-effect::after {
    width: 250px;
    height: 250px;
    bottom: -80px;
    right: -80px;
  }
}

/* 深色模式适配 */
[data-theme="dark"] #page-header.post-bg.has-glow-effect::after {
  background: radial-gradient(
    ellipse 65% 45%,
    rgba(255, 255, 255, 0.18) 0%,
    rgba(255, 255, 255, 0.12) 20%,
    rgba(255, 255, 255, 0.08) 35%,
    rgba(255, 255, 255, 0.05) 50%,
    rgba(255, 255, 255, 0.03) 70%,
    rgba(255, 255, 255, 0.01) 85%,
    transparent 100%
  );
  filter: blur(3px);
}

/* 深色模式下隐藏波浪动画 */
[data-theme="dark"] #page-header.post-bg .main-hero-waves-area,
[data-theme="dark"] #page-header.post-bg .wave-container,
[data-theme="dark"] #page-header.post-bg .wave,
[data-theme="dark"] #page-header.post-bg svg.wave {
  display: none !important;
  visibility: hidden !important;
  opacity: 0 !important;
}
